import{_ as w,m as C,a as $,c as n,b as e,F as y,v as E,e as I,t as p,d as a,w as U,r as h,o as i,x as A,A as S,B as c}from"./index-f3XW4wGb.js";import{c as g}from"./cartStore-528j6vxx.js";import{a as f}from"./axios-G2rPRu76.js";var T={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ryanchiang13",BASE_URL:"/aruadesign/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_APP_PATH:v}=T,q={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...C(g,["carts"])},methods:{...$(g,["getCart"]),adjustQty(o,s=1){const d={product_id:o.product_id,qty:s};f.put(`${b}/v2/api/${v}/cart/${o.id}`,{data:d}).then(x=>{this.getCart()})},removeCartItem(o){f.delete(`${b}/v2/api/${v}/cart/${o.id}`).then(s=>{alert(`${o.title}已刪除`),this.getCart()})},removeAllItem(){f.delete(`${b}/v2/api/${v}/carts`).then(o=>{alert("購物車已清空"),this.getCart()})},createOrder(o){const s=this.form;f.post(`${b}/v2/api/${v}/order`,{data:s}).then(d=>{console.log(d.data.orderId),this.$router.push(`/comfirm/${d.data.orderId}`),this.$refs.form.resetForm()})}},mounted(){}},P=e("div",{class:"pb-160 pb-md-120"},null,-1),L={class:"container"},B=e("h2",{class:"text-primary mb-8"},"購物車",-1),D={class:"table align-middle"},R=e("thead",null,[e("tr",null,[e("th",{class:"text-primary"},"品名"),e("th",{class:"text-primary"},"數量"),e("th",{class:"text-primary"},"小計"),e("th",{class:"text-primary"},"刪除")])],-1),j={key:0,class:"border-bottom"},O=e("tr",null,[e("td",null,[e("p",{class:"py-40 text-secondary"},"購物車還是空著的")])],-1),F=[O],N={key:1},H={class:"py-40 text-primary"},M={class:"d-flex align-items-center"},Q=["src"],z={class:"position-relative"},G={class:"fw-bold"},J=["onUpdate:modelValue","onChange"],K={class:"text-end"},W=["onClick"],X=e("span",{class:"material-symbols-outlined text-gray text-end align-middle"}," close ",-1),Y=[X],Z={class:"row justify-content-between align-items-center mb-48 mb-md-80"},ee={class:"col-6"},te=e("span",{class:"material-symbols-outlined align-middle me-4"}," delete ",-1),se={class:"col-6 col-lg-3 col-md-6"},oe={class:"d-flex justify-content-between align-items-center py-16 py-md-24"},le=e("p",{class:"me-16 text-primary"},"總計",-1),ae={class:"fs-20 fw-bold text-end"},re={class:"mb-80"},de=e("h2",{class:"text-primary"},"訂購人資料",-1),ne={class:"row text-primary"},ie={class:"col-12 col-md-6 mb-24"},ce=e("label",{for:"email",class:"form-label mb-2"},"Email",-1),me={class:"col-12 col-md-6 mb-24"},ue=e("label",{for:"name",class:"form-label mb-2"},"收件人姓名",-1),_e={class:"col-12 col-md-6 mb-24"},pe=e("label",{for:"tel",class:"form-label mb-2"},"收件人電話",-1),he={class:"col-12 col-md-6 mb-24"},fe=e("label",{for:"address",class:"form-label mb-2"},"收件人地址",-1),be=e("div",{class:"col-12 mb-40"},[e("label",{class:"form-label mb-2"},"備註"),e("textarea",{class:"w-100 form-control rounded-0",rows:"4"})],-1),ve={class:"col-12 col-md-4 offset-md-4"};function ye(o,s,d,x,r,m){const V=h("routerLink"),u=h("v-field"),_=h("error-message"),k=h("v-form");return i(),n(y,null,[P,e("div",L,[B,e("table",D,[R,o.carts.total===0?(i(),n("tbody",j,F)):(i(),n("tbody",N,[(i(!0),n(y,null,E(o.carts.carts,t=>(i(),n("tr",{key:t.id},[e("td",H,[e("div",M,[e("img",{src:t.product.imageUrl,alt:"圖片",class:"me-16 d-none d-md-block",style:{width:"10%"}},null,8,Q),e("div",z,[e("p",G,p(t.product.title),1),e("p",null,"$"+p(t.product.price),1),a(V,{to:`product/${t.product.id}`,class:"stretched-link"},null,8,["to"])])])]),e("td",null,[A(e("input",{"onUpdate:modelValue":l=>t.qty=l,onChange:l=>m.adjustQty(t,t.qty),min:"1",type:"number",class:"form-control text-center w-75"},null,40,J),[[S,t.qty]])]),e("td",null,[e("p",K,"$"+p(t.total),1)]),e("td",null,[e("button",{onClick:l=>m.removeCartItem(t),type:"button",class:"btn ms-auto d-block"},Y,8,W)])]))),128))]))]),e("div",Z,[e("div",ee,[e("button",{onClick:s[0]||(s[0]=t=>m.removeAllItem()),class:"bg-white border-0 text-gray hover-danger d-flex.align-items-center",type:"button"},[te,I("清空購物車 ")])]),e("div",se,[e("div",oe,[le,e("p",ae,"$"+p(o.carts.total),1)])])]),e("div",re,[de,a(k,{ref:"form",onSubmit:m.createOrder},{default:U(({errors:t})=>[e("div",ne,[e("div",ie,[ce,a(u,{id:"email",name:"email",type:"email",class:c(["form-control rounded-0",{"is-invalid":t.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:r.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>r.form.user.email=l)},null,8,["class","modelValue"]),a(_,{name:"email",class:"invalid-feedback"})]),e("div",me,[ue,a(u,{id:"name",name:"姓名",type:"text",class:c(["form-control rounded-0",{"is-invalid":t.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:r.form.user.name,"onUpdate:modelValue":s[2]||(s[2]=l=>r.form.user.name=l)},null,8,["class","modelValue"]),a(_,{name:"姓名",class:"invalid-feedback"})]),e("div",_e,[pe,a(u,{id:"tel",name:"電話",type:"text",class:c(["form-control rounded-0",{"is-invalid":t.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:r.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=l=>r.form.user.tel=l)},null,8,["class","modelValue"]),a(_,{name:"電話",class:"invalid-feedback"})]),e("div",he,[fe,a(u,{id:"address",name:"地址",type:"text",class:c(["form-control rounded-0",{"is-invalid":t.地址}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:r.form.user.address,"onUpdate:modelValue":s[4]||(s[4]=l=>r.form.user.address=l)},null,8,["class","modelValue"]),a(_,{name:"地址",class:"invalid-feedback"})]),be,e("div",ve,[e("button",{type:"submit",class:c([{disabled:o.carts.total===0},"w-100 btn btn-primary rounded-0"])}," 確認訂單 ",2)])])]),_:1},8,["onSubmit"])])])],64)}const ke=w(q,[["render",ye]]);export{ke as default};
