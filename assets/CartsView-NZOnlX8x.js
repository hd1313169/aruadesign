import{_ as w,m as y,a as g,c as d,b as e,F as V,v as C,e as E,t as m,d as a,w as U,r as u,o as n,y as S,B as A,x as r}from"./index-lIMdmJRJ.js";import{c as _}from"./cartStore-CFytsSbE.js";import{a as b}from"./axios-G2rPRu76.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"ryanchiang13",BASE_URL:"/aruadesign/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:f,VITE_APP_PATH:h}=I,T={data(){return{}},computed:{...y(_,["carts"]),...y(_,["form"])},methods:{...g(_,["getCart"]),adjustQty(t,o=1){const v={product_id:t.product_id,qty:o};b.put(`${f}/v2/api/${h}/cart/${t.id}`,{data:v}).then(x=>{this.getCart()})},removeCartItem(t){b.delete(`${f}/v2/api/${h}/cart/${t.id}`).then(o=>{alert(`${t.title}已刪除`),this.getCart()})},removeAllItem(){b.delete(`${f}/v2/api/${h}/carts`).then(t=>{alert("購物車已清空"),this.getCart()})},...g(_,["onSubmit"])},mounted(){}},q=e("div",{class:"pb-160 pb-md-120"},null,-1),P={class:"container"},L=e("h2",{class:"text-primary mb-8"},"購物車",-1),B={class:"table align-middle"},D=e("thead",null,[e("tr",null,[e("th",{class:"text-primary"},"品名"),e("th",{class:"text-primary"},"數量"),e("th",{class:"text-primary"},"小計"),e("th",{class:"text-primary"},"刪除")])],-1),R={key:0,class:"border-bottom"},j=e("tr",null,[e("td",null,[e("p",{class:"py-40 text-secondary"},"購物車還是空著的")])],-1),N=[j],F={key:1},H={class:"py-40 text-primary"},M={class:"d-flex align-items-center"},O=["src"],Q={class:"position-relative"},z={class:"fw-bold"},G=["onUpdate:modelValue","onChange"],J={class:"text-end"},K=["onClick"],W=e("span",{class:"material-symbols-outlined text-gray text-end align-middle"}," close ",-1),X=[W],Y={class:"row justify-content-between align-items-center mb-48 mb-md-80"},Z={class:"col-6"},ee=e("span",{class:"material-symbols-outlined align-middle me-4"}," delete ",-1),te={class:"col-6 col-lg-3 col-md-6"},se={class:"d-flex justify-content-between align-items-center py-16 py-md-24"},oe=e("p",{class:"me-16 text-primary"},"總計",-1),le={class:"fs-20 fw-bold text-end"},ae={class:"mb-80"},de=e("h2",{class:"text-primary"},"訂購人資料",-1),ne={class:"row text-primary"},re={class:"col-12 col-md-6 mb-24"},ie=e("label",{for:"email",class:"form-label mb-2"},"Email",-1),ce={class:"col-12 col-md-6 mb-24"},me=e("label",{for:"name",class:"form-label mb-2"},"收件人姓名",-1),ue={class:"col-12 col-md-6 mb-24"},_e=e("label",{for:"tel",class:"form-label mb-2"},"收件人電話",-1),pe={class:"col-12 col-md-6 mb-24"},be=e("label",{for:"address",class:"form-label mb-2"},"收件人地址",-1),fe=e("div",{class:"col-12 mb-40"},[e("label",{class:"form-label mb-2"},"備註"),e("textarea",{class:"w-100 form-control rounded-0",rows:"4"})],-1),he={class:"col-12 col-md-4 offset-md-4"};function ve(t,o,v,x,ye,p){const $=u("routerLink"),i=u("v-field"),c=u("error-message"),k=u("v-form");return n(),d(V,null,[q,e("div",P,[L,e("table",B,[D,t.carts.total===0?(n(),d("tbody",R,N)):(n(),d("tbody",F,[(n(!0),d(V,null,C(t.carts.carts,s=>(n(),d("tr",{key:s.id},[e("td",H,[e("div",M,[e("img",{src:s.product.imageUrl,alt:"圖片",class:"me-16 d-none d-md-block",style:{width:"10%"}},null,8,O),e("div",Q,[e("p",z,m(s.product.title),1),e("p",null,"$"+m(s.product.price),1),a($,{to:`product/${s.product.id}`,class:"stretched-link"},null,8,["to"])])])]),e("td",null,[S(e("input",{"onUpdate:modelValue":l=>s.qty=l,onChange:l=>p.adjustQty(s,s.qty),min:"1",type:"number",class:"form-control text-center w-75"},null,40,G),[[A,s.qty]])]),e("td",null,[e("p",J,"$"+m(s.total),1)]),e("td",null,[e("button",{onClick:l=>p.removeCartItem(s),type:"button",class:"btn ms-auto d-block"},X,8,K)])]))),128))]))]),e("div",Y,[e("div",Z,[e("button",{onClick:o[0]||(o[0]=s=>p.removeAllItem()),class:"border-0 text-gray hover-danger d-flex.align-items-center",type:"button"},[ee,E("清空購物車 ")])]),e("div",te,[e("div",se,[oe,e("p",le,"$"+m(t.carts.total),1)])])]),e("div",ae,[de,a(k,{ref:"form",onSubmit:o[5]||(o[5]=s=>t.onSubmit())},{default:U(({errors:s})=>[e("div",ne,[e("div",re,[ie,a(i,{id:"email",name:"email",type:"email",class:r(["form-control rounded-0",{"is-invalid":s.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":o[1]||(o[1]=l=>t.form.user.email=l)},null,8,["class","modelValue"]),a(c,{name:"email",class:"invalid-feedback"})]),e("div",ce,[me,a(i,{id:"name",name:"姓名",type:"text",class:r(["form-control rounded-0",{"is-invalid":s.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":o[2]||(o[2]=l=>t.form.user.name=l)},null,8,["class","modelValue"]),a(c,{name:"姓名",class:"invalid-feedback"})]),e("div",ue,[_e,a(i,{id:"tel",name:"電話",type:"text",class:r(["form-control rounded-0",{"is-invalid":s.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:t.form.user.tel,"onUpdate:modelValue":o[3]||(o[3]=l=>t.form.user.tel=l)},null,8,["class","modelValue"]),a(c,{name:"電話",class:"invalid-feedback"})]),e("div",pe,[be,a(i,{id:"address",name:"地址",type:"text",class:r(["form-control rounded-0",{"is-invalid":s.地址}]),placeholder:"請輸入收件人地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.user.address=l)},null,8,["class","modelValue"]),a(c,{name:"地址",class:"invalid-feedback"})]),fe,e("div",he,[e("button",{class:r([{disabled:t.carts.total===0},"w-100 btn btn-primary rounded-0"])}," 確認訂單 ",2)])])]),_:1},512)])])],64)}const $e=w(T,[["render",ve]]);export{$e as default};
